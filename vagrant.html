<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

<h2>Installing Vagrant on Ubuntu 14.04</h2>
<ul>
    <li>run: $ sudo apt-get install virtualbox</li>
    <li>Go to vagrant site and install debian vagrant version manually (default apt-get install vagrant gives outdated version)</li>
    <li>run: $ sudo apt-get install virtualbox-dkms</li>
    <li>restart machine</li>
</ul>

<h2>First Environment setup: after installation</h2>
<ol>
    <li>Create a directory anywhere "vagrant" (name can be anything).</li>
    <li>cd vagrant</li>
    <li>Create projects here (boxes), create directory (say "ubuntu").</li>
    <li>cd ubuntu</li>
    <li>run $ vagrant init ubuntu/trusty64 (it creates a Vagrantfile in ubuntu directory with specified (ubunty/trusty64) os image.</li>
    <li>Optionally to step 4 you can just run "vagrant init" and edit Vagrant file to put os manually.</li>
    <li>run $ vagrant up  (this command will download os image).</li>
    <li>run $ vagrant ssh (it will take you to command line of ubuntu on vagrant virtually).</li>
    <li>$ exit (will take you to host command line back.)</li>
    <li>Now we have 3 options for this box termination:
        <ul>
            <li>$ <b>vagrant destroy</b> <br> will dispose the box. (note that image of OS is already saved)
                so no need to worry about redownload on "vagrant up"</li>
            <li>$ <b>vagrant suspend</b> <br> just same as our laptop suspend (all states are saved)
                "vagrant up" regain. Fastest method is suspending (5-10 secs to come alive again)</li>
            <li>$ <b>vagrant halt</b> <br> clean shut down.</li>
        </ul>
    </li>
    <p><b>Note:</b>All three terminations revert is $ <b>vagrant up</b></p>
</ol>

<p>
    http://www.olindata.com/blog/2014/07/installing-vagrant-and-virtual-box-ubuntu-1404-lts
    Follow the instructions except do not install vagrant from this command.
    Go to vagrant site and install debian vagrant version manually (default apt-get install vagrant gives outdated version)

    Restart after vagrant install


    sudo chmod -R 777 /home/tudip/.vagrant.d/
    #if any problem of user access


    // remove vagrant totally:

    1. On Linux, remove the /opt/vagrant directory and the /usr/bin/vagrant file.
    2.  remove the ~/.vagrant.d directory to delete the user data.



    After installation:

    1. Create a directory anywhere "vagrant" (name can be anything).
    2. cd vagrant
    2. Create projects here (boxes), create directory (say "ubuntu").
    3. cd ubuntu.
    4. "vagrant init ubuntu/trusty64" => command (in creates a Vagrantfile in ubuntu directory with specified (ubunty/trusty64) os image.
    5. optionally to step 4 you can just run "vagrant init" and edit Vagrant file to put os manually.
    6. Then "vagrant up" =? this command will download os image.
    7. Now you can run "vagrant ssh" and it will take you to command line of ubuntu on vagrant virtually.
    8. "exit" => will take you to host command line back.
    9. Now we have three options for this box termination:  a: "vagrant destroy" will dispose the box. (note that image of OS is already saved)
    so no need to worry about redownlaod on "vagrant up"

    b: "vagrant suspend" just same as our laptop suspend (all states are saved)
    "vagrant up" regain. Fastest method is suspending (5-10 secs to come alive again)

    c: "vagrant halt" clean shut down. ("vagrant up" to regain)




    10. add "config.vm.network "forwarded_port",guest:80, host:8080"
    Redirect traffic from port 80 on VM(guest) to the host on port 8080 that is why we can now access the website
    from "http://localhost:8080" w/o needing to be in VM

    You have to vagrant destroy and then vagrant up after adding this line.

    11. now ssh to virtual ubuntu by "vagrant ssh"
    12. Run "sudo i" => to become root
    13. apt-get install apache2
    14. hit localhost:8080

    all sites are on var/www/html but vagrant have shared folder b/w host and vm.

    15. rm -rf /var/www/html => delete active dir of virtual ubuntu
    16. ln -fs /vagrant /var/www/html

    this creates a symlink ponting /var/www/html -> to vagrant

    again hit localhost:8080


    17: apt-get install phpmyadmin
    18: service apache2 restart
    19: ln -s /usr/share/phpmyadmin /var/www/
    20: ln -s /usr/share/phpmyadmin /vagrant

    17: Provisioning:
    config.vm.provision "shell", path: "filename.sh"

    18: create "filename.sh" and your script

    19: https://www.dev-metal.com/copy-duplicate-vagrant-box/
    to copy one box to another machine

    LAMP script

    #!/usr/bin/env bash
    sudo -i
    echo "Installing apache"
    apt-get install apache2 -y

    echo "Reconfugiring shared folders and applying symlinks"
    rm -rf /var/www/html
    ln -fs /vagrant /var/www/html

    echo "Installing git"
    apt-get install git -y

    echo "Updating PHP repository"
    apt-get install python-software-properties build-essential -y
    add-apt-repository ppa:ondrej/php5 -y
    apt-get update


    echo "Installing PHP"

    apt-get install php5 libapache2-mod-php5 php5-mcrypt -y
    echo "Installing PHP extensions"
    apt-get install curl php5-curl php5-gd php5-mcrypt php5-mysql -y

    apt-get install debconf-utils -y

    debconf-set-selections <<< "mysql-server mysql-server/root_password password root"

    debconf-set-selections <<< "mysql-server mysql-server/root_password_again password root"

    echo "Installing MYSQl"

    apt-get install mysql-server -y

    mysqli_install_db
    service apache2 restart


    To change vagrant to some alias for commands like vagrant up ----> myalias up:
    You can do that in your bash or zsh settings


    If you use BASH, you would add to your .bashrc something like `alias grhup = "cd /Users/jeremyvaught/Projects/Sites/grh/homestead && vagrant up"`
    [9:57:08 PM] Jeremy Vaught: And then no matter where you are in your command line, you type `grhup` and it takes to you the directory and run vagrant up

</p>
</body>
</html>